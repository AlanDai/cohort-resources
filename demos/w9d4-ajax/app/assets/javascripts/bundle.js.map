{"version":3,"sources":["webpack:///webpack/bootstrap 57c696c43814058cd227","webpack:///./frontend/giphy_lite.js","webpack:///./frontend/gif_api_util.js"],"names":["GifApiUtil","require","setEventHandlers","$","on","clearGif","e","preventDefault","fetchNewGif","saveGif","fetchSavedGif","newGifAJAX","then","url","res","data","image_url","appendGif","$input","title","val","$gifDisplay","gif","saveGifAJAX","$messages","text","setTimeout","fetchSavedGifAJAX","errors","err","responseJSON","forEach","append","message","empty","$newImage","newGifURL","ajax","method","gifArg","titleArg","module","exports"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 57c696c43814058cd227","const GifApiUtil = require('./gif_api_util');\n\nconst setEventHandlers = () => {\n  $('.clear').on('click', () => {\n    // Clear out GIF display\n    clearGif();\n  });\n\n  $('#new-gif-form').on('submit', e => {\n    e.preventDefault();\n    // Fetch a new GIF\n    fetchNewGif();\n  });\n\n  $('#save-gif-form').on('submit', e => {\n    e.preventDefault();\n    // Save GIF\n    saveGif();\n  });\n\n  $('#old-gif-form').on('submit', e => {\n    e.preventDefault();\n    // Fetch saved GIF\n    fetchSavedGif();\n  });\n};\n\n// Ready style function: Waits for DOM to load before running callback\n// Same thing as document.addEventListener('DOMContentLoaded', cb)\n$(setEventHandlers);\n\n// setEventHandlers will run after the dom is fully loaded\n// it adds all of our event handlers after we're sure the elements are on the page\n\n// ------------- GIF ACTIONS - fetchNew, save, and fetchSaved ---------------\n\nconst fetchNewGif = () => {\n  // Initiate AJAX call to GIPHY API, take response and put on the DOM\n  GifApiUtil.newGifAJAX() // this function returns a promise\n    .then(res => {\n      const url = res.data.image_url;\n      appendGif(url);\n    });\n};\n\nconst saveGif = e => {\n  // get title of gif\n  const $input = $('#save-gif-title');\n  const title = $input.val();\n  $input.val('');\n\n  // get url of gif\n  const $gifDisplay = $('.gif-display');\n  const url = $gifDisplay.data('url');\n\n  // make gif obj\n  // const gif = {\n  //   title: title,\n  //   url: url\n  // };\n  const gif = { title, url }; // same as lines 57-60\n\n  // Initiate AJAX request to Rails backend, give a message if successful\n  // give an error if request was unsuccessful\n  GifApiUtil.saveGifAJAX(gif)\n    .then(res => {\n      let $messages = $('.messages');\n      $messages.text('WE DID IT');\n      setTimeout(() => {\n        $messages.text('')\n      }, 3000)\n    })\n};\n\nconst fetchSavedGif = () => {\n  const $input = $('#old-gif-query');\n  const title = $input.val();\n  $input.val('');\n\n  // Initate AJAX request to Rails backend, add GIF to the DOM if successful\n  // show errors if request was unsuccessful\n  GifApiUtil.fetchSavedGifAJAX(title)\n    .then(res => appendGif(res.url), err => {\n      const errors = err.responseJSON;\n      let $messages = $('.messages');\n      errors.forEach(message => {\n        $messages.append(message);\n      })\n      setTimeout(() => {\n        $messages.text('')\n      }, 3000)\n    })\n    // .fail(err => {\n    //   const errors = err.responseJSON;\n    //   let $messages = $('.messages');\n    //   errors.forEach(message => {\n    //     $messages.append(message);\n    //   })\n    //   setTimeout(() => {\n    //     $messages.text('')\n    //   }, 3000)\n    // })\n};\n\nconst clearGif = () => {\n  const $gifDisplay = $('.gif-display');\n  $gifDisplay.empty();\n  return $gifDisplay;\n}\n\nconst appendGif = newGifURL => {\n  // Add gif to the display and keep track of its url\n  let $gifDisplay = clearGif();\n\n  const $newImage = $(`<img class=\"gif\" src=\"${newGifURL}\">`);\n  $gifDisplay.data(\"url\", newGifURL); //set data attr on gif display\n  $gifDisplay.append($newImage);\n};\n\n\n// WEBPACK FOOTER //\n// ./frontend/giphy_lite.js","const GifApiUtil = {\n  newGifAJAX: function() {\n    // always explicitly return because it makes debugging easier\n    // explicitly returning whatever is returned by the ajax method. (a promise)\n    return $.ajax({ // need to explicitly return to chain .then\n      method: 'GET', // default method\n      url: `https://api.giphy.com/v1/gifs/random?api_key=9IfxO6R6fpEZMAdqdw66QUgQdPejVIAW&rating=G`\n    });\n  },\n  saveGifAJAX: function(gifArg) {\n    // gifArg is an object that represents a gif\n\n    return $.ajax({\n      method: 'POST', \n      url: '/gifs', // cant use rails helper methods\n      data: { gif: gifArg }\n    });\n  },\n  fetchSavedGifAJAX: function(titleArg) {\n\n    return $.ajax({\n      method: 'GET',\n      url: `/gifs/${titleArg}`\n    })\n  }\n};\n\nmodule.exports = GifApiUtil;\n\n\n// WEBPACK FOOTER //\n// ./frontend/gif_api_util.js"],"sourceRoot":""}