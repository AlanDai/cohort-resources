{"version":3,"sources":["webpack:///webpack/bootstrap 9a755b3b54718a7a6348","webpack:///./frontend/giphy_lite.js","webpack:///./frontend/gif_api_util.js"],"names":["GifApiUtil","require","setEventListeners","$","on","e","preventDefault","fetchNewGif","saveGif","fetchSavedGif","clearGif","newGifAJAX","then","response","url","data","image_url","appendGif","$input","title","val","gifArg","$messages","successCallback","text","setTimeout","empty","failureCallback","err","responseJSON","saveGifAJAX","fail","fetchSavedGifAJAX","res","console","log","$gifDisplay","$newImage","newGifURL","append","ajax","method","dataType","gif","titleArg","module","exports"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9a755b3b54718a7a6348","const GifApiUtil = require('./gif_api_util');\n\n// Install event listeners\nconst setEventListeners = () => {\n  $('#new-gif-form').on('submit', e => {\n    e.preventDefault(); // prevents default form submission action\n    // Fetch a new GIF\n    fetchNewGif();\n  });\n\n  $('#save-gif-form').on('submit', e => {\n    e.preventDefault(); // pretty much always on form submits\n    // Save GIF\n    saveGif();\n  });\n\n  $('#old-gif-form').on('submit', e => {\n    e.preventDefault();\n    // Fetch saved GIF\n    fetchSavedGif(); \n  });\n\n  $(\".clear\").on(\"click\", () => {\n    // Clear out GIF display\n    clearGif();\n  });\n};\n\n// it will be invoked for us when the page loads\n$(setEventListeners); // sets event listener on DOMContentLoaded\n// document.addEventListener('DOMContentLoaded', setEventListeners);\n// setEventListeners will run after the dom is fully loaded\n// it adds all of our event listeners after we're sure the elements are on the page\n\n\n// ------------- GIF event handlers - fetchNew, save, fetchSaved, and clear ---------------\n\nconst fetchNewGif = () => {\n  // Initiate AJAX call to GIPHY API, take response and put on the DOM\n  GifApiUtil.newGifAJAX()\n    .then((response) => { \n      const url = response.data.image_url;\n      appendGif(url);\n    })\n};\n\nconst saveGif = e => {\n  const $input = $('#save-gif-title'); // select this element\n  const title = $input.val(); // extract the input's value \n  $input.val(''); // clear the input\n\n  // Initiate AJAX request to Rails backend, give a message if successful\n  // give an error if request was unsuccessful\n  const url = $('.gif-display').data('url'); \n  const gifArg = { title: title, url: url };\n  const $messages = $('.messages');\n\n  const successCallback = () => {\n    // show a message telling the user that their save was successful\n    $messages.text('THE SAVE WAS SUCCESSFUL. YOU HAVE DONE IT.');\n    setTimeout(() => $messages.empty(), 5000);\n  };\n\n  const failureCallback = (err) => {\n    $messages.text(err.responseJSON[0]);\n    setTimeout(() => $messages.empty(), 5000);\n  }\n\n  GifApiUtil.saveGifAJAX(gifArg)\n    .then(successCallback)\n    .fail(failureCallback); // .catch if not using jQuery $.ajax method\n};\n\nconst fetchSavedGif = () => {\n  const $input = $('#old-gif-query');\n  const title = $input.val();\n  $input.val('');\n\n  // Initate AJAX request to Rails backend, add GIF to the DOM if successful\n  // show errors if request was unsuccessful\n  GifApiUtil.fetchSavedGifAJAX(title)\n    .then(\n      (res) => appendGif(res.url), // success\n      (err) => { console.log(err.responseJSON[0]) } // failure\n    )\n};\n\nconst clearGif = () => {\n  const $gifDisplay = $(\".gif-display\");\n  $gifDisplay.empty();\n  return $gifDisplay;\n};\n\n\n// ------------- Other helper functions ---------------\n\nconst appendGif = newGifURL => {\n  // Add gif to the display and keep track of its url\n  const $gifDisplay = $('.gif-display'); // grab this div\n  $gifDisplay.empty(); // clear its content\n\n  const $newImage = $(`<img class=\"gif\" src=\"${newGifURL}\">`); // create a new image element\n  $gifDisplay.data(\"url\", newGifURL); // puts the url in the data \n  $gifDisplay.append($newImage); // attach the new image to the display\n};\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/giphy_lite.js","const GifApiUtil = {\n  newGifAJAX: function() {\n    // always explicitly return because it makes debugging easier\n    // explicitly returning whatever is returned by the ajax method. (a promise)\n    return $.ajax({\n      method: 'GET',\n      url: 'https://api.giphy.com/v1/gifs/random?api_key=9IfxO6R6fpEZMAdqdw66QUgQdPejVIAW&rating=G', // family friendly\n    });\n  },\n  saveGifAJAX: function(gifArg) {\n    // gifArg === a gif object\n    // { title: 'something', url: 'a_url.com' }\n    // data looks like this\n    // { gif: { title: 'something', url: 'a_url.com' } }\n    // matches your strong params from controller\n\n    return $.ajax({\n      method: 'POST', // dont need caps\n      url: '/gifs',\n      dataType: 'json',\n      data: {\n        gif: gifArg\n      }\n    });\n  },\n  fetchSavedGifAJAX: function(titleArg) {\n    return $.ajax({\n      method: 'GET',\n      url: `/gifs/${titleArg}`,\n      dataType: 'json'\n    });\n  }\n};\n\nmodule.exports = GifApiUtil;\n\n\n// WEBPACK FOOTER //\n// ./frontend/gif_api_util.js"],"sourceRoot":""}